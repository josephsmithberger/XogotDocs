@Tutorial(time: 35) {
    @Intro(title: "Creating your first script") {

        @Image(source: "scripting_first_script_rotating_godot.gif")
    }
    @Section(title: "Introduction") {
        @ContentAndMedia {
            In this lesson, you will code your first script to make the Godot icon turn in
            circles. 
            
            This tutorial assumes you have some basic programming foundations before you start.
            
            Now that we've stated that, let's have fun learning to code in GDScript!
        }
    }
    @Section(title: "Project setup") {
        @ContentAndMedia {
            >Important: Please create a new project to
            start with a clean slate. 
            
            In the file browser dock  on the left you will find one image: the Godot icon or `icon.svg`; which we often use for prototyping in the community.

            @Image(source: "scripting_first_script_icon.png")
        }
        @Steps {
            We need to create a Sprite2D node to display it in the game. 
            @Step {
                In the Scene dock,
                press the Other Node button.
                @Image(source: "scripting_first_script_click_other_node.png")
            }
            @Step {
                Tap **All** in the tab bar and then
                type "Sprite2D" in the search bar to filter nodes and double-tap on Sprite2D
                to create the node.
                @Image(source: "scripting_first_script_add_sprite_node.png")
            }
            @Step {
                Your Scene tab should now only have a Sprite2D node.
                @Image(source: "scripting_first_script_scene_tree.png")
            }
            @Step {
                A Sprite2D node needs a texture to display. We can add this in the Scope on the right; you can open it by tapping the Scope icon if it's closed. 
                
                Inside, you
                can see that the Texture property says `Pick Resource`. 
                @Image(source: "scripting_first_script_resource.png")
            }
            @Step {
                To display the
                Godot icon, drag the file `icon.svg` from the FileSystem dock on the left onto the
                Texture slot
                
                Alternatively, tap `Pick Resource` and pick `Load` in the menu that appears. Then in the popup window, choose the icon file and hit `select`. 
                @Image(source: "scripting_first_script_setting_texture.png")
            }
            > Tip: You can create Sprite2D nodes automatically by dragging and dropping images on the viewport.
            @Step {
                With the move tool selected, press and drag the icon in the viewport to center it in the game view.
                @Image(source: "scripting_first_script_centering_sprite.png")
            }
        }
    }
    @Section(title: "Creating a new script") {
        @ContentAndMedia {
            It's time to create and attach a new script to our node!
        }
        @Steps {
            @Step {
                Select `Sprite2D` in the tree and then press the Attach Script icon.
                @Image(source: "scripting_first_script_attach_script.png")
            }
            The window that opens is called the "Attach Node Script" window. It allows you to select the script's language and file path, among other options.
            @Step {
                Hit the toggle switch for **Use Template** to `off` in  order to
                start with a clean file (1). Leave the other options set to their default values and press the **Create** (2) button to create the script.
                @Image(source: "scripting_first_script_attach_node_script.png")
            }
            @Step {
                The Script workspace should appear with your new `sprite_2d.gd` file open and
                the following line of code: `extends Sprite2D`

                @Code(name: "sprite_2d.gd", file: scripting_01.gd, previousFile: scripting_01.gd)
            }
            Every GDScript file functions implicitly as an extension of a class. The `extends` keyword defines the class this script inherits or extends. In this case, it's `Sprite2D`, meaning our script will get access to all the properties and functions of the Sprite2D node, including classes it extends, like `Node2D`, `CanvasItem`, and `Node`.

            > Tip: In GDScript, if you omit the line with the `extends` keyword, your
                class will implicitly extend [`RefCounted`](https://docs.godotengine.org/en/stable/classes/class_RefCounted.html#class-RefCounted), which
                the Godot Engine uses to manage your application's memory.

            By extending we have access to inherited properties which include the ones you can see in the Inspector dock, like
                our node's `texture` property.

            > Tip: By default, the Scope displays a node's properties in "Title Case", with
                capitalized words separated by a space. In GDScript code, these properties
                are in "snake_case", which is lowercase with words separated by an underscore. You can hover over any property's name in the Inspector to see a description and
                its identifier in code.
    
        }
    }
    @Section(title: "Hello, world!") {
        @ContentAndMedia {
            Our script currently doesn't do anything. Let's make it print the text "Hello,
            world!" to the Output bottom panel to get started.
        }
        @Steps {
            @Step {
                Add the following code to your script:

                @Code(name: "sprite_2d.gd", file: scripting_02.gd, previousFile: scripting_01.gd)
            }
            Let's break it down. 
            
            - The `func` keyword defines a new function named
            `_init`. 
            - "`_init`" is a built in function that acts as our class's constructor function. When this function is defined, the Godot Engine will try to call this function first whenever the object is defined in memory.
            
            > Note:  As an indent-based language, GDScript requires the print() line to be indented to function. Incorrect indentation, like if we had not indented that block, triggers the error: 'Indented block expected'.
            
            > Warning: You may use either tabs or spaces, but consistency is key. You *strictly* **cannot** mix both within the same file.
            @Step {
                Save the scene as `sprite_2d.tscn` if you haven't already, then press **Play**
                to run it. Look at the Output bottom panel that expands automatically.
                It should display "Hello, world!".
                @Image(source: "scripting_first_script_print_hello_world.png")
            }
            @Step {
                Delete the `_init()` function, so you're only left with the line `extends
                Sprite2D`.
                @Code(name: "sprite_2d.gd", file: scripting_03.gd, previousFile: scripting_02.gd)
            }
        }
    }
    @Section(title: "Turning around") {
        @ContentAndMedia {
            It's time to make our node move and rotate. To do so, we're going to add two
            member variables to our script: the movement speed in pixels per second and the angular speed in radians per second. 
        }
        @Steps {
            @Step {
                Add the following after the `extends Sprite2D` line.

                @Code(name: "sprite_2d.gd", file: scripting_04.gd, previousFile: scripting_03.gd)
            }
            Let's breakdown what we just added. 
            These are called Member variables.
            
            Member variables sit near the top of the script, after any "extends" lines,
            but before functions. Every node
            instance with this script attached to it will have its own copy of the `speed`
            and `angular_speed` properties.
            
            > Note on Radians: Angles in the Godot Engine work in radians by default, though built-in properties allow you to work in degrees if preferred. Because of this default, we use PI to initialize our angular speed; PI corresponds to 180 degrees, or roughly 3.14 radians.
            
            To move our icon, we need to update its position and rotation every frame in the
            game loop. Godot Engine classes that are based on the `Node` class, like Sprite2D, come with a built in function we can use called `_process()`. This is a virtual function that, once defined, Godot
            will call the function every frame and pass it an argument named `delta`, the time elapsed since the last frame.
            
            > Note on Delta: Games work by rendering many images per second, each called a frame, and
            they do so in a loop. We measure the rate at which a game produces images in
            Frames Per Second (FPS). Most games aim for 60 FPS, although you might find
            figures like 30 FPS on slower mobile devices or 90 to 240 for virtual
            reality games. The engine and game developers do their best to update the game world and
            render images at a constant time interval, but there are always small
            variations in frame render times. That's why the engine provides us with
            this delta time value, making our motion independent of our framerate.
            
            @Step {
                At the bottom of the script, define the function like this:

                @Code(name: "sprite_2d.gd", file: scripting_05.gd, previousFile: scripting_04.gd)
            }
            Breaking this down: we start with the keyword `func` and the function name. Then, we use parentheses as a container for the arguments. The colon at the end tells the engine that the instructions follow in the indented block below.
            
            > Tip: Notice how `_process()`, like `_init()`, starts with a leading underscore. By convention, GDScript uses this to mark virtual functions or callbacks the engine looks for and runs automatically. This also follows general programming conventions of GDScript that many developers use, where a leading `_` indicates that a function or variable is private or intended for internal use within the script rather than external access.
            
            Inside the function we just created, the line `rotation += angular_speed * delta` updates the sprite's angle every frame.
            
            > Breaking this down: First, take note that rotation is a property inherited from **Node2D** (the class **Sprite2D** extends). It controls the node's angle using radians. Next, we increment (using `+=`) this value by our `angular_speed` multiplied by `delta`. Multiplying by `delta` converts our speed from 'per frame' to 'per second,' ensuring the movement remains consistent regardless of the frame rate.
            
            > Tip: In the code editor, you can double-tap or select and press **lookup symbol** in the context menu on any built-in property or function like `position`,
            `rotation`, or `_process` to open the corresponding documentation
            in a new tab.
            @Step {
                Run the scene to see the Godot icon turn in-place.
                @Image(source: "scripting_first_script_godot_turning_in_place.gif")
            }
        }
    }
    @Section(title: "Moving forward") {
        @ContentAndMedia {
            Let's make the node move. 
        }
        @Steps {
            @Step {
                Add the following two lines inside of the `_process()`
                function, ensuring the new lines are indented the same way as the line before
                them.

                @Code(name: "sprite_2d.gd", file: scripting_06.gd, previousFile: scripting_05.gd)
            }
            As we covered, `var` defines variables. At the top of the script, it creates a *property* accessible everywhere. Inside a function, it creates a *local variable* that exists only within that block.
            
            Inside, we define a local `velocity` variable. To find the forward direction, we take `Vector2.UP` and rotate it by the node's angle using `.rotated(rotation)`.
            
            Multiplying this direction by `speed` gives us our movement vector. Finally, we add `velocity * delta` to the node's position property to move it
            
            The position property is a  [`Vector2`](https://docs.godotengine.org/en/stable/classes/class_Vector2.html#class-Vector2)
            ; a built-in type in the Godot Engine
            representing a 2D vector.
            
            @Step {
                Run the scene to see the Godot icon run in circles.
                @Image(source: "scripting_first_script_rotating_godot.gif")
            }
            
            Our node currently moves by itself. In the next part, we'll use player input to control the movement.
            
            @Step {
                And here is the complete script:
                @Code(name: "sprite_2d.gd", file: scripting_06_final.gd)
            }
        }
    }
}
